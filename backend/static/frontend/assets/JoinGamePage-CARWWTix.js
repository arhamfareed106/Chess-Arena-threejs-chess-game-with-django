import{j as e}from"./three-BQE6C20b.js";import{r as x}from"./vendor-CnEhrtKZ.js";import{a as S,u as G,b as E,n as c}from"./index-Cx1_nSxO.js";import{g as B}from"./gameService-CS8lbNSt.js";import{b as D,B as t,f as J,o as W,a as i,g as C,h as k,s as Y,m as f,d as y}from"./ui-Cda-PtV-.js";const L=()=>{var w;const{gameId:d}=S(),h=G(),I=E(),[b,g]=x.useState(!1),[r,p]=x.useState({playerName:"",color:"#4ecdc4",password:((w=I.state)==null?void 0:w.password)||""}),[l,u]=x.useState({}),j=a=>s=>{p(o=>({...o,[a]:s.target.value})),l[a]&&u(o=>({...o,[a]:""}))},N=a=>{p(s=>({...s,color:a.target.value}))},T=()=>{const a={};return r.playerName.trim()?r.playerName.length<2?a.playerName="Name must be at least 2 characters":r.playerName.length>50&&(a.playerName="Name must be less than 50 characters"):a.playerName="Player name is required",(!r.color||!r.color.match(/^#[0-9A-F]{6}$/i))&&(a.color="Please select a valid color"),u(a),Object.keys(a).length===0},F=async a=>{var s,o;if(a.preventDefault(),!d){c.error("No game ID provided");return}if(T()){g(!0);try{const n=await B.joinGame(d,r);localStorage.setItem("playerId",n.playerId),localStorage.setItem("playerToken",n.playerToken),c.success("Successfully joined game!"),h(`/play/${d}`)}catch(n){if(console.error("Failed to join game:",n),((s=n.response)==null?void 0:s.status)===400){const m=n.response.data;typeof m=="object"&&m.error?c.error(m.error):typeof m=="object"?u(m):c.error("Failed to join game. Please check your input.")}else((o=n.response)==null?void 0:o.status)===404?(c.error("Game not found"),h("/")):c.error("Failed to join game. Please try again.")}finally{g(!1)}}},v=()=>{h("/")},P=()=>{const a=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#10ac84","#ee5a24","#0abde3","#3742fa","#2f3542"],s=a[Math.floor(Math.random()*a.length)];p(o=>({...o,color:s}))};return e.jsxs(D,{maxWidth:"sm",sx:{py:4},children:[e.jsxs(t,{className:"mb-6",children:[e.jsxs(t,{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{onClick:v,sx:{color:"white"},children:e.jsx(W,{})}),e.jsx(i,{variant:"h4",className:"text-white font-bold",children:"Join Game"})]}),e.jsx(i,{variant:"body1",className:"text-white/80",children:"Enter your details to join the TI Chess battle."})]}),e.jsx(C,{sx:{background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)"},children:e.jsxs(k,{sx:{p:4},children:[!d&&e.jsx(Y,{severity:"error",className:"mb-4",children:"No game ID provided. Please select a game from the lobby."}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsx(f,{fullWidth:!0,label:"Your Name",value:r.playerName,onChange:j("playerName"),error:!!l.playerName,helperText:l.playerName,placeholder:"Enter your display name",required:!0}),e.jsxs(t,{children:[e.jsx(i,{variant:"body2",className:"mb-2 font-medium",children:"Choose Your Color:"}),e.jsxs(t,{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:r.color,onChange:N,className:"w-16 h-12 rounded border-2 border-gray-300 cursor-pointer"}),e.jsx(t,{className:"flex-1",children:e.jsx(f,{fullWidth:!0,size:"small",value:r.color,onChange:N,placeholder:"#4ecdc4",error:!!l.color,helperText:l.color})}),e.jsx(y,{variant:"outlined",size:"small",onClick:P,children:"Random"})]})]}),r.password!==void 0&&e.jsx(f,{fullWidth:!0,type:"password",label:"Game Password",value:r.password,onChange:j("password"),error:!!l.password,helperText:l.password,placeholder:"Enter the game password"}),e.jsxs(t,{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx(i,{variant:"body2",className:"font-medium mb-2",children:"Preview:"}),e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{backgroundColor:r.color}}),e.jsxs(i,{variant:"body2",children:[r.playerName||"Your Name"," - ",r.color]})]})]}),e.jsxs(t,{className:"flex gap-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outlined",onClick:v,sx:{flex:1},children:"Cancel"}),e.jsx(y,{type:"submit",variant:"contained",disabled:b||!d,sx:{flex:2},children:b?"Joining Game...":"Join Game"})]})]})]})}),e.jsx(C,{sx:{mt:3,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)"},children:e.jsxs(k,{children:[e.jsx(i,{variant:"h6",className:"text-white font-semibold mb-2",children:"ðŸŽ® Game Tips"}),e.jsxs("ul",{className:"text-white/90 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Choose a unique color that represents your strategy"}),e.jsx("li",{children:"â€¢ Make sure your name is memorable for your opponent"}),e.jsx("li",{children:"â€¢ The game will start once both players are ready"}),e.jsx("li",{children:"â€¢ You can reconnect if your connection drops"})]})]})})]})};export{L as default};
//# sourceMappingURL=JoinGamePage-CARWWTix.js.map
