import{j as e}from"./three-BQE6C20b.js";import{r as m}from"./vendor-CnEhrtKZ.js";import{u as G,n as u}from"./index-DoO26Zrr.js";import{g as S}from"./gameService-DBbfCwCN.js";import{b as F,B as o,f,o as q,a as l,g as y,h as w,m as p,F as E,p as I,q as T,V as B,r as D,d as v}from"./ui-Cda-PtV-.js";const R=()=>{const x=G(),[b,g]=m.useState(!1),[d,N]=m.useState(!1),[a,P]=m.useState({name:"",isPublic:!0,password:"",hostName:""}),[i,h]=m.useState({}),c=s=>r=>{const n=r.target.type==="checkbox"?r.target.checked:r.target.value;P(t=>({...t,[s]:n})),i[s]&&h(t=>({...t,[s]:""}))},C=()=>{var r;const s={};return a.hostName.trim()?a.hostName.length<2?s.hostName="Name must be at least 2 characters":a.hostName.length>50&&(s.hostName="Name must be less than 50 characters"):s.hostName="Your name is required",a.name.trim()?a.name.length<3?s.name="Game name must be at least 3 characters":a.name.length>100&&(s.name="Game name must be less than 100 characters"):s.name="Game name is required",!a.isPublic&&!((r=a.password)!=null&&r.trim())?s.password="Password is required for private games":!a.isPublic&&a.password&&a.password.length<4&&(s.password="Password must be at least 4 characters"),h(s),Object.keys(s).length===0},k=async s=>{var r;if(s.preventDefault(),!!C()){g(!0);try{const n={...a,password:a.isPublic?void 0:a.password},t=await S.createGame(n);u.success("Game created successfully!"),x(`/play/${t.id}`)}catch(n){if(console.error("Failed to create game:",n),((r=n.response)==null?void 0:r.status)===400){const t=n.response.data;typeof t=="object"?h(t):u.error("Please check your input and try again.")}else u.error("Failed to create game. Please try again.")}finally{g(!1)}}},j=()=>{x("/")};return e.jsxs(F,{maxWidth:"sm",sx:{py:4},children:[e.jsxs(o,{className:"mb-6",children:[e.jsxs(o,{className:"flex items-center gap-2 mb-4",children:[e.jsx(f,{onClick:j,sx:{color:"white"},children:e.jsx(q,{})}),e.jsx(l,{variant:"h4",className:"text-white font-bold",children:"Create New Game"})]}),e.jsx(l,{variant:"body1",className:"text-white/80",children:"Set up your TI Chess game and invite another player to join the strategic battle."})]}),e.jsx(y,{sx:{background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)"},children:e.jsx(w,{sx:{p:4},children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx(p,{fullWidth:!0,label:"Your Name",value:a.hostName,onChange:c("hostName"),error:!!i.hostName,helperText:i.hostName,placeholder:"Enter your display name",required:!0}),e.jsx(p,{fullWidth:!0,label:"Game Name",value:a.name,onChange:c("name"),error:!!i.name,helperText:i.name,placeholder:"Enter a name for your game",required:!0}),e.jsx(o,{children:e.jsx(E,{control:e.jsx(I,{checked:a.isPublic,onChange:c("isPublic"),color:"primary"}),label:e.jsxs(o,{children:[e.jsx(l,{variant:"body1",children:a.isPublic?"Public Game":"Private Game"}),e.jsx(l,{variant:"caption",className:"text-gray-600",children:a.isPublic?"Anyone can see and join this game":"Only players with the password can join"})]})})}),!a.isPublic&&e.jsx(p,{fullWidth:!0,type:d?"text":"password",label:"Game Password",value:a.password,onChange:c("password"),error:!!i.password,helperText:i.password||"Players will need this password to join",placeholder:"Enter a password for your game",required:!0,InputProps:{endAdornment:e.jsx(T,{position:"end",children:e.jsx(f,{onClick:()=>N(!d),edge:"end",children:d?e.jsx(B,{}):e.jsx(D,{})})})}}),e.jsxs(o,{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx(l,{variant:"body2",className:"font-medium mb-2",children:"Game Rules Summary:"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ 2 players take turns moving pieces on an 8Ã—8 board"}),e.jsx("li",{children:"â€¢ Pieces evolve from Talent â†’ Leader â†’ Strategist â†’ Investor"}),e.jsx("li",{children:"â€¢ Win by eliminating all opponent Investor pieces"}),e.jsx("li",{children:"â€¢ Each piece type has unique movement and special abilities"})]})]}),e.jsxs(o,{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outlined",onClick:j,sx:{flex:1},children:"Cancel"}),e.jsx(v,{type:"submit",variant:"contained",disabled:b,sx:{flex:2},children:b?"Creating Game...":"Create Game"})]})]})})}),e.jsx(y,{sx:{mt:3,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)"},children:e.jsxs(w,{children:[e.jsx(l,{variant:"h6",className:"text-white font-semibold mb-2",children:"ðŸ’¡ Pro Tips"}),e.jsxs("ul",{className:"text-white/90 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Choose a descriptive game name to attract players"}),e.jsx("li",{children:"â€¢ Private games are great for playing with friends"}),e.jsx("li",{children:"â€¢ Share the game link and password with your opponent"}),e.jsx("li",{children:"â€¢ Games auto-delete after 24 hours of inactivity"})]})]})})]})};export{R as default};
//# sourceMappingURL=CreateGamePage-DAwLUYkC.js.map
