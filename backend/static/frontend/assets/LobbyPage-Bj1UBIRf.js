import{j as e}from"./three-BQE6C20b.js";import{r}from"./vendor-CnEhrtKZ.js";import{u as B,n as R}from"./index-Cx1_nSxO.js";import{G as l}from"./index-DpsEWzRx.js";import{g as q}from"./gameService-CS8lbNSt.js";import{a,b as O,B as t,d as i,A as y,I as V,e as K,f as Q,R as U,g as N,h as I,G as w,i as C,P as X,S as Y,j as Z,D as G,k as P,l as S,m as _,n as T}from"./ui-Cda-PtV-.js";const oe=()=>{const d=B(),[u,k]=r.useState([]),[A,j]=r.useState(!0),[g,p]=r.useState(!1),[D,h]=r.useState(!1),[W,o]=r.useState(!1),[E,L]=r.useState(""),[m,v]=r.useState(""),x=async(s=!0)=>{try{s?j(!0):p(!0);const n=await q.getActiveGames();k(n)}catch(n){console.error("Failed to load games:",n),R.error("Failed to load games. Please try again.")}finally{j(!1),p(!1)}};r.useEffect(()=>{x();const s=setInterval(()=>x(!1),3e4);return()=>clearInterval(s)},[]);const b=()=>{d("/create")},M=(s,n)=>{n?d(`/join/${s}`):(L(s),o(!0))},F=()=>{o(!1),d(`/join/${E}`,{state:{password:m}}),v("")},J=s=>{switch(s){case l.WAITING:return"warning";case l.ACTIVE:return"success";case l.FINISHED:return"default";default:return"default"}},z=s=>{switch(s){case l.WAITING:return"Waiting for Players";case l.ACTIVE:return"In Progress";case l.FINISHED:return"Finished";default:return s}},H=s=>{const n=new Date(s),$=new Date().getTime()-n.getTime(),c=Math.floor($/(1e3*60));if(c<1)return"Just now";if(c<60)return`${c}m ago`;const f=Math.floor(c/60);return f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`};return A?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-4"}),e.jsx(a,{variant:"h6",className:"text-white",children:"Loading games..."})]})}):e.jsxs(O,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(t,{className:"text-center mb-8",children:[e.jsx(a,{variant:"h2",className:"font-bold text-white mb-4",children:"TI Chess"}),e.jsx(a,{variant:"h5",className:"text-white/80 mb-6",children:"Technology Investment Chess - Strategic Evolution Game"}),e.jsxs(t,{className:"flex justify-center gap-4 mb-6",children:[e.jsx(i,{variant:"contained",size:"large",startIcon:e.jsx(y,{}),onClick:b,sx:{px:4,py:1.5},children:"Create Game"}),e.jsx(i,{variant:"outlined",size:"large",startIcon:e.jsx(V,{}),onClick:()=>h(!0),sx:{px:4,py:1.5,color:"white",borderColor:"rgba(255,255,255,0.5)","&:hover":{borderColor:"white",backgroundColor:"rgba(255,255,255,0.1)"}},children:"How to Play"})]})]}),e.jsxs(t,{className:"mb-6",children:[e.jsxs(t,{className:"flex items-center justify-between mb-4",children:[e.jsx(a,{variant:"h4",className:"text-white font-semibold",children:"Active Games"}),e.jsx(K,{title:"Refresh games list",children:e.jsx(Q,{onClick:()=>x(!1),disabled:g,sx:{color:"white"},children:e.jsx(U,{className:g?"animate-spin":""})})})]}),u.length===0?e.jsx(N,{className:"text-center py-8",children:e.jsxs(I,{children:[e.jsx(a,{variant:"h6",className:"text-gray-600 mb-2",children:"No active games found"}),e.jsx(a,{variant:"body2",className:"text-gray-500 mb-4",children:"Be the first to start a new game!"}),e.jsx(i,{variant:"contained",startIcon:e.jsx(y,{}),onClick:b,children:"Create New Game"})]})}):e.jsx(w,{container:!0,spacing:3,children:u.map(s=>e.jsx(w,{item:!0,xs:12,sm:6,lg:4,children:e.jsxs(N,{className:"h-full flex flex-col transition-transform hover:scale-105",sx:{background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)"},children:[e.jsxs(I,{className:"flex-1",children:[e.jsxs(t,{className:"flex items-start justify-between mb-3",children:[e.jsx(a,{variant:"h6",className:"font-semibold truncate",children:s.name||`Game ${s.id.slice(0,8)}`}),e.jsx(C,{label:z(s.status),color:J(s.status),size:"small"})]}),e.jsxs(t,{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs(t,{className:"flex items-center gap-1",children:[e.jsx(X,{fontSize:"small"}),e.jsxs("span",{children:[s.players.length,"/2"]})]}),e.jsxs(t,{className:"flex items-center gap-1",children:[e.jsx(Y,{fontSize:"small"}),e.jsx("span",{children:H(s.createdAt)})]})]}),s.players.length>0&&e.jsxs(t,{className:"mb-3",children:[e.jsx(a,{variant:"caption",className:"text-gray-500 block mb-1",children:"Players:"}),e.jsx(t,{className:"flex flex-wrap gap-1",children:s.players.map(n=>e.jsxs(t,{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:n.color}}),e.jsx("span",{children:n.name}),n.isHost&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Host)"})]},n.id))})]}),!s.isPublic&&e.jsx(C,{label:"Private",size:"small",variant:"outlined",className:"mb-2"})]}),e.jsx(Z,{children:e.jsx(i,{fullWidth:!0,variant:"contained",disabled:s.players.length>=2||s.status!==l.WAITING,onClick:()=>M(s.id,s.isPublic),children:s.players.length>=2?"Game Full":s.status!==l.WAITING?"In Progress":"Join Game"})})]})},s.id))})]}),e.jsxs(G,{open:W,onClose:()=>o(!1),children:[e.jsx(P,{children:"Join Private Game"}),e.jsxs(S,{children:[e.jsx(a,{variant:"body2",className:"mb-4 text-gray-600",children:"This is a private game. Please enter the password to join."}),e.jsx(_,{fullWidth:!0,type:"password",label:"Game Password",value:m,onChange:s=>v(s.target.value),margin:"normal"})]}),e.jsxs(T,{children:[e.jsx(i,{onClick:()=>o(!1),children:"Cancel"}),e.jsx(i,{onClick:F,disabled:!m.trim(),children:"Join Game"})]})]}),e.jsxs(G,{open:D,onClose:()=>h(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(P,{children:e.jsx(a,{variant:"h5",className:"font-bold",children:"How to Play TI Chess"})}),e.jsxs(S,{children:[e.jsx(a,{variant:"body1",className:"mb-4",children:"TI Chess is a strategic game that models the evolution of technology companies through four levels of growth and development."}),e.jsx(a,{variant:"h6",className:"font-semibold mb-2",children:"Piece Levels:"}),e.jsxs(t,{className:"mb-4 space-y-2",children:[e.jsxs(t,{children:[e.jsx("strong",{children:"Talent (Level 1):"})," Moves up to 3 squares horizontally/vertically"]}),e.jsxs(t,{children:[e.jsx("strong",{children:"Leader (Level 2):"})," Moves up to 2 squares diagonally"]}),e.jsxs(t,{children:[e.jsx("strong",{children:"Strategist (Level 3):"})," Moves any distance in straight lines or diagonally"]}),e.jsxs(t,{children:[e.jsx("strong",{children:"Investor (Level 4):"})," Moves 1 square in any direction, can transform adjacent pieces"]})]}),e.jsx(a,{variant:"h6",className:"font-semibold mb-2",children:"Win Condition:"}),e.jsx(a,{variant:"body1",className:"mb-4",children:"Eliminate all of your opponent's Investor pieces through strategic transformations and captures."}),e.jsx(a,{variant:"h6",className:"font-semibold mb-2",children:"Transformations:"}),e.jsx(a,{variant:"body1",children:"Pieces evolve when they accumulate enough transformation points through captures, special abilities, and reaching board edges."})]}),e.jsx(T,{children:e.jsx(i,{onClick:()=>h(!1),children:"Got it!"})})]})]})};export{oe as default};
//# sourceMappingURL=LobbyPage-Bj1UBIRf.js.map
